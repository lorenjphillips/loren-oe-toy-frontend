import { v4 as uuidv4 } from 'uuid';
import {
  ReportDefinition,
  ReportComponentType,
  ChartType,
  DataFilterType,
} from '../../services/reporting/ReportDefinition';

const trendSpotlightTemplate: ReportDefinition = {
  id: 'trend-spotlight',
  name: 'Trend Spotlight Report',
  description: 'Analysis of emerging trends and patterns in pharmaceutical market data',
  author: 'System',
  createdAt: new Date(),
  updatedAt: new Date(),
  sections: [
    {
      id: uuidv4(),
      title: 'Key Trends Summary',
      description: 'Overview of the most significant emerging trends',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.Text,
          title: 'Executive Summary',
          dataSource: 'timeSeriesAnalysis',
          description: 'Summary of key emerging trends and their potential impact',
          settings: {
            markdown: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Trend Significance Heat Map',
          dataSource: 'timeSeriesAnalysis',
          description: 'Heat map showing significance of identified trends',
          settings: {
            chartType: ChartType.Scatter,
            xAxis: 'impact',
            yAxis: 'probability',
            showLegend: true,
            colors: ['#4A90E2', '#50E3C2', '#F5A623', '#D0021B', '#9013FE'],
            bubbleSize: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.MetricCard,
          title: 'Trend Velocity Index',
          dataSource: 'timeSeriesAnalysis',
          description: 'Measure of how rapidly key trends are emerging',
          settings: {
            format: '#.#',
            showChange: true,
            comparisonPeriod: 'previous',
            icon: 'speedometer',
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'Top Emerging Trends',
          dataSource: 'timeSeriesAnalysis',
          description: 'Table of top emerging trends with key metrics',
          settings: {
            pagination: true,
            search: true,
            sortable: true,
            columns: [
              { field: 'trend', header: 'Trend' },
              { field: 'growth', header: 'Growth Rate', format: '+#.##%' },
              { field: 'impact', header: 'Potential Impact', format: '#.#' },
              { field: 'confidence', header: 'Confidence', format: '#.##%' },
              { field: 'timeframe', header: 'Expected Timeframe' },
            ],
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Prescription Trend Analysis',
      description: 'Detailed analysis of prescription trends',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.TimeseriesChart,
          title: 'Prescription Volume Trends',
          dataSource: 'prescriptionTrends',
          description: 'Prescription volume trends over time',
          settings: {
            chartType: ChartType.Line,
            xAxis: 'date',
            yAxis: 'volume',
            showLegend: true,
            colors: ['#4A90E2', '#50E3C2', '#F5A623', '#D0021B', '#9013FE'],
            smoothLine: true,
            projectionLine: true,
            timeframe: '12m',
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Prescription Growth by Category',
          dataSource: 'prescriptionTrends',
          description: 'Growth rates across different prescription categories',
          settings: {
            chartType: ChartType.Bar,
            xAxis: 'category',
            yAxis: 'growthRate',
            showLegend: false,
            horizontal: true,
            colors: ['#4A90E2'],
            sortData: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.HeatMap,
          title: 'Regional Prescription Heat Map',
          dataSource: 'geographicDistribution',
          description: 'Geographic distribution of prescription trends',
          settings: {
            colorScale: 'diverging',
            legendPosition: 'right',
            metric: 'growthRate',
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Market Adoption Curves',
      description: 'Analysis of market adoption patterns',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.TimeseriesChart,
          title: 'Product Adoption Curves',
          dataSource: 'timeSeriesAnalysis',
          description: 'Adoption curves for key products over time',
          settings: {
            chartType: ChartType.Line,
            xAxis: 'month',
            yAxis: 'adoptionPercentage',
            showLegend: true,
            colors: ['#4A90E2', '#50E3C2', '#F5A623', '#D0021B', '#9013FE'],
            smoothLine: true,
            projectionLine: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Adoption by HCP Segment',
          dataSource: 'hcpEngagement',
          description: 'Adoption rates across different HCP segments',
          settings: {
            chartType: ChartType.Bar,
            xAxis: 'segment',
            yAxis: 'adoptionRate',
            showLegend: true,
            horizontal: false,
            colors: ['#4A90E2', '#50E3C2', '#F5A623'],
            series: ['Early Adopters', 'Majority', 'Late Adopters'],
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'Adoption Metrics by Product',
          dataSource: 'timeSeriesAnalysis',
          description: 'Key adoption metrics for top products',
          settings: {
            pagination: true,
            search: true,
            sortable: true,
            columns: [
              { field: 'product', header: 'Product' },
              { field: 'adoptionRate', header: 'Adoption Rate', format: '#.##%' },
              { field: 'growthRate', header: 'Growth Rate', format: '+#.##%' },
              { field: 'timeToAdoption', header: 'Time to Adoption', format: '# months' },
              { field: 'saturation', header: 'Expected Saturation', format: '#.##%' },
            ],
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Demographic Shifts',
      description: 'Analysis of demographic trends affecting the market',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Age Distribution Shifts',
          dataSource: 'patientDemographics',
          description: 'Changes in patient age distribution over time',
          settings: {
            chartType: ChartType.Bar,
            xAxis: 'ageGroup',
            yAxis: 'percentage',
            showLegend: true,
            horizontal: false,
            colors: ['#4A90E2', '#50E3C2', '#F5A623'],
            series: ['Previous Period', 'Current Period', 'Projected'],
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Prescription Trends by Gender',
          dataSource: 'patientDemographics',
          description: 'Prescription trends broken down by gender',
          settings: {
            chartType: ChartType.Line,
            xAxis: 'month',
            yAxis: 'prescriptions',
            showLegend: true,
            colors: ['#4A90E2', '#F5A623'],
            series: ['Male', 'Female'],
            smoothLine: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'Key Demographic Indicators',
          dataSource: 'patientDemographics',
          description: 'Summary of key demographic indicators and trends',
          settings: {
            pagination: true,
            search: true,
            sortable: true,
            columns: [
              { field: 'indicator', header: 'Demographic Indicator' },
              { field: 'previousValue', header: 'Previous', format: '#.##%' },
              { field: 'currentValue', header: 'Current', format: '#.##%' },
              { field: 'change', header: 'Change', format: '+#.##%' },
              { field: 'significance', header: 'Significance', format: 'High/Medium/Low' },
            ],
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Channel & Engagement Trends',
      description: 'Analysis of trends in engagement channels and methods',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Channel Effectiveness Trends',
          dataSource: 'hcpEngagement',
          description: 'Trends in effectiveness of different engagement channels',
          settings: {
            chartType: ChartType.Line,
            xAxis: 'month',
            yAxis: 'effectiveness',
            showLegend: true,
            colors: ['#4A90E2', '#50E3C2', '#F5A623', '#D0021B', '#9013FE'],
            series: ['In-person', 'Email', 'Virtual', 'Social', 'Digital'],
            smoothLine: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Channel Mix Evolution',
          dataSource: 'hcpEngagement',
          description: 'Evolution of channel mix over time',
          settings: {
            chartType: ChartType.Area,
            xAxis: 'quarter',
            yAxis: 'percentage',
            showLegend: true,
            stacked: true,
            colors: ['#4A90E2', '#50E3C2', '#F5A623', '#D0021B', '#9013FE'],
            series: ['In-person', 'Email', 'Virtual', 'Social', 'Digital'],
            fillOpacity: 0.7,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'Engagement Metrics by Channel',
          dataSource: 'hcpEngagement',
          description: 'Key engagement metrics across different channels',
          settings: {
            pagination: true,
            search: true,
            sortable: true,
            columns: [
              { field: 'channel', header: 'Channel' },
              { field: 'volume', header: 'Volume', format: '#,###' },
              { field: 'engagementRate', header: 'Engagement Rate', format: '#.##%' },
              { field: 'conversionRate', header: 'Conversion Rate', format: '#.##%' },
              { field: 'roi', header: 'ROI', format: '+#.##x' },
              { field: 'trend', header: 'Trend', format: 'Up/Down/Stable' },
            ],
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Market Disruptors & Opportunities',
      description: 'Potential market disruptors and emerging opportunities',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.Text,
          title: 'Emerging Disruptors',
          dataSource: 'marketShare',
          description: 'Analysis of potential market disruptors and their impact',
          settings: {
            markdown: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Opportunity Assessment Matrix',
          dataSource: 'timeSeriesAnalysis',
          description: 'Matrix plot of identified opportunities by potential and feasibility',
          settings: {
            chartType: ChartType.Scatter,
            xAxis: 'potential',
            yAxis: 'feasibility',
            showLegend: true,
            colors: ['#4A90E2', '#50E3C2', '#F5A623', '#D0021B'],
            bubbleSize: true,
            quadrantLines: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'Top Opportunities',
          dataSource: 'timeSeriesAnalysis',
          description: 'Detailed list of top identified opportunities',
          settings: {
            pagination: true,
            search: true,
            sortable: true,
            columns: [
              { field: 'opportunity', header: 'Opportunity' },
              { field: 'potential', header: 'Market Potential', format: '$#,###K' },
              { field: 'feasibility', header: 'Feasibility', format: '#.#/10' },
              { field: 'timeframe', header: 'Timeframe' },
              { field: 'requirements', header: 'Key Requirements' },
            ],
          },
        },
      ],
    },
  ],
  filters: [
    {
      type: DataFilterType.DateRange,
      field: 'reportDate',
      operator: 'last 12 months',
      value: '',
      label: 'Time Period',
    },
    {
      type: DataFilterType.Category,
      field: 'productCategory',
      operator: 'equals',
      value: 'all',
      label: 'Product Category',
    },
    {
      type: DataFilterType.Threshold,
      field: 'growthRateThreshold',
      operator: 'greater than',
      value: 5,
      label: 'Growth Rate Threshold',
    },
    {
      type: DataFilterType.Region,
      field: 'country',
      operator: 'equals',
      value: 'all',
      label: 'Country/Region',
    },
  ],
  branding: {
    logo: '/assets/logo.png',
    primaryColor: '#0066CC',
    secondaryColor: '#F5A623',
    fontFamily: 'Arial, sans-serif',
  },
};

export default trendSpotlightTemplate; 
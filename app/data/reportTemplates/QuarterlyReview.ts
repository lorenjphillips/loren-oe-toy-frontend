import { v4 as uuidv4 } from 'uuid';
import {
  ReportDefinition,
  ReportComponentType,
  ChartType,
  DataFilterType,
} from '../../services/reporting/ReportDefinition';

const quarterlyReviewTemplate: ReportDefinition = {
  id: 'quarterly-review',
  name: 'Quarterly Performance Review',
  description: 'Comprehensive quarterly review of pharmaceutical performance',
  author: 'System',
  createdAt: new Date(),
  updatedAt: new Date(),
  sections: [
    {
      id: uuidv4(),
      title: 'Quarterly Highlights',
      description: 'Key metrics and achievements for the quarter',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.Text,
          title: 'Quarter Overview',
          dataSource: 'salesData',
          description: 'Executive summary of the quarter\'s performance',
          settings: {
            markdown: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.MetricCard,
          title: 'Quarterly Revenue',
          dataSource: 'salesData',
          description: 'Total revenue for the quarter',
          settings: {
            format: '$#,###',
            showChange: true,
            comparisonPeriod: 'previousQuarter',
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.MetricCard,
          title: 'YoY Growth',
          dataSource: 'salesData',
          description: 'Year-over-year quarterly growth',
          settings: {
            format: '+#.##%',
            showChange: true,
            comparisonPeriod: 'previousYearSameQuarter',
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.MetricCard,
          title: 'Quarterly Prescription Volume',
          dataSource: 'prescriptionTrends',
          description: 'Total prescriptions for the quarter',
          settings: {
            format: '#,###',
            showChange: true,
            comparisonPeriod: 'previousQuarter',
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Performance vs Targets',
      description: 'Quarterly performance compared to targets',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Revenue vs Target',
          dataSource: 'salesData',
          description: 'Actual revenue compared to quarterly targets',
          settings: {
            chartType: ChartType.Bar,
            xAxis: 'category',
            yAxis: 'revenue',
            showLegend: true,
            colors: ['#4A90E2', '#50E3C2'],
            series: ['Actual', 'Target'],
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Market Share vs Target',
          dataSource: 'marketShare',
          description: 'Actual market share compared to quarterly targets',
          settings: {
            chartType: ChartType.Bar,
            xAxis: 'category',
            yAxis: 'percentage',
            showLegend: true,
            colors: ['#4A90E2', '#50E3C2'],
            series: ['Actual', 'Target'],
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'KPI Performance Table',
          dataSource: 'productPerformance',
          description: 'Detailed metrics vs targets for key performance indicators',
          settings: {
            pagination: true,
            search: true,
            sortable: true,
            columns: [
              { field: 'kpi', header: 'KPI' },
              { field: 'actual', header: 'Actual' },
              { field: 'target', header: 'Target' },
              { field: 'variance', header: 'Variance', format: '+#.##%' },
              { field: 'status', header: 'Status' },
            ],
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Quarterly Trends',
      description: 'Performance trends over the last several quarters',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.TimeseriesChart,
          title: 'Revenue by Quarter',
          dataSource: 'timeSeriesAnalysis',
          description: 'Revenue trends over the last 8 quarters',
          settings: {
            chartType: ChartType.Line,
            xAxis: 'quarter',
            yAxis: 'revenue',
            showLegend: true,
            colors: ['#4A90E2'],
            smoothLine: true,
            markers: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.TimeseriesChart,
          title: 'Quarterly Market Share',
          dataSource: 'marketShare',
          description: 'Market share trends over the last 8 quarters',
          settings: {
            chartType: ChartType.Area,
            xAxis: 'quarter',
            yAxis: 'percentage',
            showLegend: true,
            colors: ['#50E3C2'],
            fillOpacity: 0.4,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Quarterly Product Mix',
          dataSource: 'productPerformance',
          description: 'Product revenue breakdown by quarter',
          settings: {
            chartType: ChartType.Bar,
            xAxis: 'quarter',
            yAxis: 'revenue',
            showLegend: true,
            stacked: true,
            colors: ['#4A90E2', '#50E3C2', '#F5A623', '#D0021B', '#9013FE'],
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Regional Performance',
      description: 'Performance across different geographic regions',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.Chart,
          title: 'Revenue by Region',
          dataSource: 'geographicDistribution',
          description: 'Quarterly revenue by geographic region',
          settings: {
            chartType: ChartType.Bar,
            xAxis: 'region',
            yAxis: 'revenue',
            showLegend: true,
            horizontal: true,
            colors: ['#4A90E2'],
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.HeatMap,
          title: 'Regional Performance Heatmap',
          dataSource: 'geographicDistribution',
          description: 'Geographic distribution of quarterly performance',
          settings: {
            colorScale: 'sequential',
            legendPosition: 'right',
            metric: 'percentageChange',
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'Regional Performance Table',
          dataSource: 'geographicDistribution',
          description: 'Detailed metrics by region',
          settings: {
            pagination: true,
            search: true,
            sortable: true,
            columns: [
              { field: 'region', header: 'Region' },
              { field: 'revenue', header: 'Revenue', format: '$#,###' },
              { field: 'marketShare', header: 'Market Share', format: '#.##%' },
              { field: 'yoyGrowth', header: 'YoY Growth', format: '+#.##%' },
              { field: 'qoqGrowth', header: 'QoQ Growth', format: '+#.##%' },
            ],
          },
        },
      ],
    },
    {
      id: uuidv4(),
      title: 'Forecast & Outlook',
      description: 'Performance forecast and outlook for upcoming quarters',
      components: [
        {
          id: uuidv4(),
          type: ReportComponentType.TimeseriesChart,
          title: 'Revenue Forecast',
          dataSource: 'timeSeriesAnalysis',
          description: 'Actual and projected revenue for the next 4 quarters',
          settings: {
            chartType: ChartType.Line,
            xAxis: 'quarter',
            yAxis: 'revenue',
            showLegend: true,
            colors: ['#4A90E2', '#9B9B9B'],
            series: ['Actual', 'Forecast'],
            projectionLine: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Text,
          title: 'Quarterly Outlook',
          dataSource: 'marketShare',
          description: 'Analysis of future outlook and potential challenges',
          settings: {
            markdown: true,
          },
        },
        {
          id: uuidv4(),
          type: ReportComponentType.Table,
          title: 'Quarterly Forecast Table',
          dataSource: 'timeSeriesAnalysis',
          description: 'Detailed forecast metrics for upcoming quarters',
          settings: {
            pagination: true,
            search: false,
            sortable: false,
            columns: [
              { field: 'quarter', header: 'Quarter' },
              { field: 'forecastRevenue', header: 'Forecast Revenue', format: '$#,###' },
              { field: 'forecastGrowth', header: 'Forecast Growth', format: '+#.##%' },
              { field: 'confidence', header: 'Confidence', format: '#.##%' },
              { field: 'scenario', header: 'Scenario' },
            ],
          },
        },
      ],
    },
  ],
  filters: [
    {
      type: DataFilterType.DateRange,
      field: 'reportDate',
      operator: 'equals',
      value: 'currentQuarter',
      label: 'Quarter',
    },
    {
      type: DataFilterType.Category,
      field: 'productCategory',
      operator: 'equals',
      value: 'all',
      label: 'Product Category',
    },
    {
      type: DataFilterType.Region,
      field: 'country',
      operator: 'equals',
      value: 'all',
      label: 'Country/Region',
    },
  ],
  branding: {
    logo: '/assets/logo.png',
    primaryColor: '#0066CC',
    secondaryColor: '#F5A623',
    fontFamily: 'Arial, sans-serif',
  },
};

export default quarterlyReviewTemplate; 